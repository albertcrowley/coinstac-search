# coinstac-search
This is a simulated distributed search plugin for COINSTAC. 

After you have installed the [coinstac-simulator](https://www.npmjs.com/package/coinstac-simulator) and [docker](https://docs.docker.com/install/linux/docker-ce/ubuntu/) installed you can run the test as follows:

* cd coinstac-search/plugin-sim
* docker build -t coinstac/coinstac-repro-search .
* coinstac-simulator -c 4 

The input to the distributed search is a [SPARQL](https://en.wikipedia.org/wiki/SPARQL) query which will search ttl files generated by [PyNIDM](https://github.com/incf-nidash/PyNIDM). The number of hits found by each node is returned by the simulated local nodes and combined into a report by the simulated remote node. If you want to change the SPARQL query you can edit coinstac-search/plugin-sim/test/inputspec.json.  
Each simulated local node will read the NIDM data from a file named local**X**.nidm.ttl where the **X** is the node number. You can replace or add to these files with other .ttl files. The simulation will fail if specify more simultated local nodes using the -c option than you have localX.nidm.ttl files.
